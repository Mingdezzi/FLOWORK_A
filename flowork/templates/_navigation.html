<div class="accordion accordion-flush" id="navAccordion">
    
    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#menu-sales">
                <i class="bi bi-shop me-2 text-primary"></i> 영업 관리
            </button>
        </h2>
        <div id="menu-sales" class="accordion-collapse collapse {{ 'show' if active_page in ['sales', 'sales_record', 'order', 'store_orders', 'store_returns', 'online_mgmt'] else '' }}" data-bs-parent="#navAccordion">
            <div class="accordion-body p-0">
                <div class="list-group list-group-flush">
                    <a href="{{ url_for('ui.sales_register') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'sales' else '' }}">판매 등록 (POS)</a>
                    <a href="{{ url_for('ui.sales_record') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'sales_record' else '' }}">판매 조회/환불</a>
                    <a href="{{ url_for('ui.order_list') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'order' else '' }}">고객 주문 관리</a>
                    <a href="{{ url_for('ui.store_order_list') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'store_orders' else '' }}">본사 주문 요청</a>
                    <a href="{{ url_for('ui.store_return_list') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'store_returns' else '' }}">본사 반품 요청</a>
                    <a href="{{ url_for('ui.online_management') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'online_mgmt' else '' }}">온라인몰 관리</a>
                </div>
            </div>
        </div>
    </div>

    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#menu-stock">
                <i class="bi bi-box-seam me-2 text-success"></i> 재고/물류
            </button>
        </h2>
        <div id="menu-stock" class="accordion-collapse collapse {{ 'show' if active_page in ['search', 'list', 'check', 'transfer_in', 'transfer_out', 'transfer_status', 'stock_overview'] else '' }}" data-bs-parent="#navAccordion">
            <div class="accordion-body p-0">
                <div class="list-group list-group-flush">
                    <a href="{{ url_for('ui.search_page') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'search' else '' }}">상품 검색</a>
                    <a href="{{ url_for('ui.list_page') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'list' else '' }}">상세 조건 검색</a>
                    <a href="{{ url_for('ui.check_page') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'check' else '' }}">재고 실사</a>
                    <a href="{{ url_for('ui.stock_transfer_in') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'transfer_in' else '' }}">수평 입고</a>
                    <a href="{{ url_for('ui.stock_transfer_out') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'transfer_out' else '' }}">수평 출고</a>
                    <a href="{{ url_for('ui.stock_transfer_status') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'transfer_status' else '' }}">수평 이동 현황</a>
                    {% if not current_user.store_id %}
                    <a href="{{ url_for('ui.stock_overview') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'stock_overview' else '' }}">통합 재고 현황</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#menu-ops">
                <i class="bi bi-shop-window me-2 text-warning"></i> 매장 운영
            </button>
        </h2>
        <div id="menu-ops" class="accordion-collapse collapse {{ 'show' if active_page in ['schedule', 'attendance', 'competitor_sales', 'customer_list', 'repair_list', 'announcements', 'suggestion', 'mail'] else '' }}" data-bs-parent="#navAccordion">
            <div class="accordion-body p-0">
                <div class="list-group list-group-flush">
                    <a href="{{ url_for('ui.schedule') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'schedule' else '' }}">매장 일정</a>
                    <a href="{{ url_for('ui.attendance_page') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'attendance' else '' }}">직원 근태</a>
                    <a href="{{ url_for('ui.competitor_sales_page') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'competitor_sales' else '' }}">타사 매출</a>
                    <a href="{{ url_for('ui.customer_list') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'customer_list' else '' }}">고객 관리</a>
                    <a href="{{ url_for('ui.repair_list') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'repair_list' else '' }}">수선 접수</a>
                    <a href="{{ url_for('ui.announcement_list') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'announcements' else '' }}">공지사항</a>
                    <a href="{{ url_for('ui.suggestion_list') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'suggestion' else '' }}">건의사항</a>
                    <a href="{{ url_for('ui.mail_box') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'mail' else '' }}">점간 메일</a>
                </div>
            </div>
        </div>
    </div>

    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#menu-settings">
                <i class="bi bi-gear me-2 text-secondary"></i> 시스템 설정
            </button>
        </h2>
        <div id="menu-settings" class="accordion-collapse collapse {{ 'show' if active_page in ['setting', 'stock'] else '' }}" data-bs-parent="#navAccordion">
            <div class="accordion-body p-0">
                <div class="list-group list-group-flush">
                    <a href="{{ url_for('ui.stock_management') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'stock' else '' }}">재고/DB 설정</a>
                    <a href="{{ url_for('ui.setting_page') }}" class="list-group-item list-group-item-action small ps-4 {{ 'active' if active_page == 'setting' else '' }}">매장/직원 관리</a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mt-4 px-3 d-lg-none">
        <a href="{{ url_for('auth.logout') }}" class="btn btn-outline-danger w-100">
            <i class="bi bi-box-arrow-right me-2"></i> 로그아웃
        </a>
    </div>

</div>
